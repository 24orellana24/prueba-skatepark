<table class="table w-50 m-auto">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Foto</th>
      <th scope="col">Nombre</th>
      <th scope="col">AÃ±os de experiencia</th>
      <th scope="col">Especialidad</th>
      <th scope="col">Estado</th>
    </tr>
  </thead>
  <tbody>
    {{#each skaters}}
      <tr>
        <th scope="row">{{this.id}}</th>
        <td><div><img src="/img/{{this.foto}}" class="card-img-top mx-auto d-block" width="100" height="70" alt="..."></div></td>
        <td>{{this.nombre}}</td>
        <td>{{this.anos_experiencia}}</td>
        <td>{{this.especialidad}}</td>
        {{#if this.estado}}
          <td><input type="checkbox" name="checkboxSkater" value="{{this.email}}" checked/></td>
        {{else}}
          <td><input type="checkbox" name="checkboxSkater" value="{{this.email}}"/></td>
        {{/if}}
      </tr>
    {{/each}}
  </tbody>
</table>
<div class="mt-3">
  <button type="button" class="btn btn-info" onclick="actualizarEstado()">Ejecutar Cambios</button>
  <a href="/"><button type="button" class="btn btn-danger">Salir Sin Ejecutar</button></a>
</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


<script>
  let url = "http://localhost:3000/admin";

  async function actualizarEstado() {
    const checkboxSkater = document.querySelectorAll("input[name=checkboxSkater]");
    dataCambios = []
    checkboxSkater.forEach(data => {
      dataCambios.push({
        email: data.value,
        estado: data.checked
      });
    });
    await axios.post(url, dataCambios)
  }

</script>